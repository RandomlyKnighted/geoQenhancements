<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>

    <script src="https://code.createjs.com/easeljs-0.8.2.min.js"></script>

    <script>
      Viewer = function() {
        var divID = 'mapCanvas';
        this.width = 800;
        this.height = 600;

        var canvas = document.createElement('canvas');
        canvas.width = this.width;
        canvas.height = this.height;

        document.getElementById(divID).appendChild(canvas);

        this.scene = new createjs.Stage(canvas);
        createjs.Ticker.setFPS(30);
        createjs.Ticker.addEventListener('tick', this.scene);
      };

      Viewer.prototype.addObject = function(object) {
        this.scene.addChild(object);
      };

      Viewer.prototype.scaleToDimensions = function(width, height) {
        // restore to values before shifting, if ocurred
          this.scene.x = typeof this.scene.x_prev_shift !== 'undefined' ? this.scene.x_prev_shift : this.scene.x;
          this.scene.y = typeof this.scene.y_prev_shift !== 'undefined' ? this.scene.y_prev_shift : this.scene.y;

          // save scene scaling
          this.scene.scaleX = this.width / width;
          this.scene.scaleY = this.height / height;
      };

      Viewer.prototype.shift = function(x, y) {
        // save current offset
        this.scene.x_prev_shift = this.scene.x;
        this.scene.y_prev_shift = this.scene.y;

        // shift scene by scaling the desired offset
        this.scene.x -= (x * this.scene.scaleX);
        this.scene.y += (y * this.scene.scaleY);
      };

      ROS2D.PanView = function(options) {
        options = options || {};
        this.rootObject = options.rootObject;

        // get a handle to the stage
        if (this.rootObject instanceof createjs.Stage) {
          this.stage = this.rootObject;
        }
        else {
          this.stage = this.rootObject.getStage();
        }

        this.startPos = new ROSLIB.Vector3();
      };

      ROS2D.PanView.prototype.startPan = function(startX, startY) {
        this.startPos.x = startX;
        this.startPos.y = startY;
      };

      ROS2D.PanView.prototype.pan = function(curX, curY) {
        this.stage.x += curX - this.startPos.x;
        this.startPos.x = curX;
        this.stage.y += curY - this.startPos.y;
        this.startPos.y = curY;
      };

      function init() {
        var viewer = new Viewer({
          divId: "mapCanvas",
          width: 800,
          height: 600
        });

        viewer.addObject(

        viewer.scene.addEventListener('stagemousemove', function(event) {

        });

        viewer.scene.addEventListener('stagemouseup', function(event) {

        });

      };
    </script>

  </head>

  <body onload="init()">
    <canvas id="mapCanvas"></canvas>
  </body>
</html>
